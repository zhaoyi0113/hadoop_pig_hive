d$AQI[0]
d$AQI[1]
ggplot() + geom_line(data =d , aes(x=Date, y=AQI, group=1, col='red')) + geom_text(aes(x='2016-01-01',y=d$AQI[1],  label='AQI'))
ggplot() + geom_line(data =d , aes(x=Date, y=AQI, group=1, col='red')) + geom_text(aes(x=d$Date[1],y=d$AQI[1],  label='AQI'))
d[['AQI']]
source('data_analyst.r')
plotData(c('AQI', 'PM2.5', 'PM10','PM10_24h', 'PM2.5_24h'))
source('data_analyst.r')
plotData(c('AQI', 'PM2.5', 'PM10','PM10_24h', 'PM2.5_24h'))
plotData(c('AQI'))
plotData(c('AQI', 'PM2.5'))
plotData(c('AQI', 'CO'))
plotData(c('AQI', 'CO', 'PM10'))
source('~/dev/bigdata/pm25/restapi.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
library(ggplot)
install.packages('ggplot')
install.packages('ggplot2')
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
install.packages('library(rsjon)
in')
install.packages('rsjon')
toJson()
toJSON()
library(jsonlite)
toJSON()
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/decision_tree_pm25.R', echo=TRUE)
head(siteData)
tree <- rpart(AQI ~ ., siteData, method="class")
fancyRpartPlot(tree)
siteData[is.na(siteData)] <- 0
tree <- rpart(AQI ~ ., siteData, method="class")
fancyRpartPlot(tree)
head(siteData)
help(rpart)
tree <- rpart(AQI ~ SO2, siteData, method="class")
fancyRpartPlot(tree)
head(tree)
fancyRpartPlot(tree)
head(siteData)
names(siteData)
head(siteData$AQI)
siteData$AQI[siteData < 0]
fancyRpartPlot(tree)
tree <- rpart(AQI ~ SO2, siteData, method="class")
tree
head(siteDate[c('AQI, SO2')])
head(siteData[c('AQI, SO2')])
siteData[c('AQI', 'SO2')]
head(siteData[c('AQI', 'SO2')])
a <- siteData[siteData$AQI > 100]
head(a)
nrow(a)
siteData$good <- siteData$AQI > 50
siteData$good
tree <- rpart(good ~ SO2, siteData, method="class", parms=())
tree <- rpart(good ~ SO2, siteData, method="class")
fancyRpartPlot(tree)
siteData <- querySiteDate('DongSi', '2016', 'Month')
siteData[is.na(siteData)] <- 0
siteData$good <- siteData$AQI > 50
tree <- rpart(good ~ SO2, siteData, method="class")
fancyRpartPlot(tree)
siteData$good
tree <- rpart(good ~ ., siteData, method="class")
fancyRpartPlot(tree)
siteData$good[siteData$good] <- 1
siteData$good
tree <- rpart(good ~ ., siteData, method="class")
fancyRpartPlot(tree)
tree
siteData$AQI
siteData[c('AQI','good')]
tree <- rpart(good ~ AQI, siteData, method="class")
fancyRpartPlot(tree)
tree
siteData$good <- siteData$AQI < 50 && siteData$PM2.5 < 50
siteData$good[siteData$good] <- 1
tree <- rpart(good ~ AQI, siteData, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~ AQI, siteData, method="class")
siteData$good
siteData$AQI
siteData$PM2.5
siteData$good <- siteData$AQI < 30 && siteData$PM2.5 < 30
siteData$good
siteData$good <- siteData$AQI < 30 || siteData$PM2.5 < 30
siteData$good
siteData[c('good', 'AQI', 'PM2.5')]
siteData$good <- (siteData$AQI < 30 || siteData$PM2.5 < 30)
siteData[c('good', 'AQI', 'PM2.5')]
dse <- within(siteData, {good= ifelse(AQI < 30)})
dse <- within(siteData, {good= ifelse(AQI < 30, 1, 0)})
dse
dse <- within(siteData, {good= ifelse(AQI < 50, 1, 0)})
dse$good
names(dse)
dse <- within(siteData, {good = ifelse(AQI<50,1,0)})
tree <- rpart(dse ~ AQI, siteData, method="class")
tree <- rpart(good ~ AQI, dse, method="class")
fancyRpartPlot(tree)
tre
tree
dse <- within(siteData, {good = ifelse(AQI<50 && pm25<50,1,0)})
tree <- rpart(good ~ AQI, dse, method="class")
fancyRpartPlot(tree)
tree
dse$good
dse <- within(siteData, {good = ifelse(AQI<50 || pm25<50,1,0)})
dse <- within(siteData, {good = ifelse(AQI<50 || pm25<50,1,0)})
dse$good
siteData$PM2.5
dse <- within(siteData, {good = ifelse(AQI<50 || PM2.5<50,1,0)})
tree <- rpart(good ~ AQI, dse, method="class")
fancyRpartPlot(tree)
tree
dse$good
dse$good[dse$AQI < 50] <- 1
dse$good
dse$good <- 0
dse$good
dse$good[dse$AQI < 50] <- 1
dse$good
tree <- rpart(good ~ AQI, dse, method="class")
tree
tree <- rpart(good ~ . , dse, method="class")
fancyRpartPlot(tree)
tree
dse
train <- data.frame(s=0, y=1)
train
x <- data.frame('SN' = 1:10, 'Age' = c(11:20))
x
x$SN <- x$SN > 5
x
t <- rpart(Age ~ ., x, method='class')
t
x$Age <- x$Age > 10
x
t <- rpart(Age ~ ., x, method='class')
x$Survived <- c(0,1,1,1,0,1,0,1,0)
x$Survived <- c(0,1,1,1,0,1,0,1,0,1)
x
t <- rpart(Survived ~ ., x, method="class")
t
x <- data.frame(Survived=as.numeric())
x
x <- data.frame(Survived=as.numeric(), pclass=as.numeric(), age=as.numeric())
x
names(x)
x[0] <- c(0,1,1)
x[0] <- list(0,1,1)
x
x$Survived <- c(0,1,1,0,0,0)
x[1,] <- c(0,1,1,0,0,0)
x
x[,1] <- c(0,1,1,0,0,0)
x[1,] <- c(0,2,24)
x[2,] <- c(1,1,16)
x[3,] <- c(1,1,36)
x[4,] <- c(0,2,39)
x
x[5,] <- c(0,2,30)
x[6,] <- c(0,3,30)
x
t <- rpart(Suvivied ~ ., x, method='class')
t <- rpart(Survived ~ ., x, method='class')
t
siteData <- querySiteDate('DongSi', '2016', 'Day')
nrow(siteData)
siteData <- querySiteDate('DongSi', '2016', 'DAY')
nrow(siteData)
dse <- within(siteData, {good = ifelse(AQI<50 || PM2.5<50,1,0)})
dse
dse$good
dse <- within(siteData, {good = ifelse(AQI<50 && PM2.5<50,1,0)})
dse$good
dse <- within(siteData, {good = ifelse(AQI<50 <50,1,0)})
dse <- within(siteData, {good = ifelse(AQI<50,1,0)})
dse$good
siteData[is.na(siteData)] <- 0
dse <- within(siteData, {good = ifelse(AQI<50,1,0)})
dse$good
tree <- rpart(good ~ . , dse, method="class")
tree
fancyRpartPlot(tree)
tree <- rpart(good ~ AQI , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~ AQI + PM2.5 , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~  PM2.5 , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~  PM2.5 + PM10 , dse, method="class")
fancyRpartPlot(tree)
help(predict)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
siteData <- querySiteDate('DongSi', '2016', 'DAY')
warnings()
head(siteDat)
head(siteData)
nrow(siteData)
siteDataLm <- lm(siteData ~ AqI)
siteDataLm <- lm(siteData ~ AQI)
siteDataLm <- lm(siteData ~ siteData$AQI)
siteDataLm <- lm(siteData$AQI ~ siteData$Date)
head(siteDataLm)
nrow(siteData$Date)
length(siteData$Date)
future_dates <- req(366:375)
future_dates <- seq(366:375)
future_dates <- data.frame(date = 366:375)
nrow(future_dates)
pred <- predict(siteDataLm, future_dates)
names(siteData)
length(names(siteData))
siteData[, 14]
siteData[, 15]
siteData[, 15] <- seq(1:365)
names(siteDAta)
names(siteData)
length(names(siteData))
site_data_lm <- lm(siteData$AQI, siteData$V15)
site_data_lm <- lm(siteData$AQI ~ siteData$V15)
future_dates
pred <- predict(site_data_lm, future_dates)
future_dates
pred <- predict(site_data_lm, future_dates)
future_dates <- data.frame(days = 366:375)
future_dates
site_data_lm
pred <- predict(site_data_lm, future_dates)
pred
nrow(pred)
names(pred)
pred <- predict(site_data_lm, future_dates)
site_data_lm <- lm(siteData$AQI ~ siteData$V15)
pred <- predict(site_data_lm, future_dates)
days <- 1:365
site_data_lm <- lm(siteData$AQI ~ days)
pred <- predict(site_data_lm, future_dates)
pred
plot(siteData ~ days, xlim=(1,365))
plot(siteData ~ days, xlim=c(1,365))
plot(siteData ~ days, xlim=c(1,365))
plot(siteData ~ days
)
head(siteData)
head(days)
length(days)
plot(siteData$AQI ~ days)
points(366:375, pred, col='red')
future_dates
future_dates <- data.frame(days=366:700)
pred <- predict(site_data_lm, future_dates)
points(366:700, pred, color='green')
points(366:700, pred, col='green')
pred
pred
pred <- predict(site_data_lm, future_dates)
length(pred)
head(pred)
points(366:700, pred, col='yellow')
points(366:700, pred, col="yellow")
points(366:375, pred, col="yellow")
ppoint(siteData ~ days, xlim = c(1:365))
pplot(siteData ~ days, xlim = c(1:365))
plot(siteData ~ days, xlim = c(1:365))
length(days)
plot(siteData ~ days, xlim = c(1,365))
plot(siteData$AQI ~ days, xlim = c(1,365))
points(366:700, pred, col='yellow')
length)pred
length(pred)
library(rpart)
library(rattle)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('data_analyst.R')
queryDataForYear('2016', 'PM2.5', 'MONTH')
queryDataForYear('2016', 'PM2.5', 'DAY')
warnings()
source('data_analyst.R')
warnings()
a <- list()
is.na(a['b'])
a['b']
is.null(a['b'])
a['b'] = c(1,2,3,4)
a[['b']]
a['b',]
a[,'b']
a[,b]
a[b,]
a[[dd]]
a[['33']]
a[['d']]
a[['b']]
a[['b',]]
a[['b']] <- c(1,2,3,4)
a
a[['b']]
a[['c']]
is.null(a[['c']])
is.null(a[['b']])
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
querySiteDate('DongSi', '2016', 'DAY')
str(catchedSitesDay)
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
names(catchedSitesDay)
catchedSitesDay
length(catchedSitesDay)
source('data_analyst.R')
length(catchedSitesDay)
names(catchedSitesDay)
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
source('data_analyst.R')
catchedSitesDay[['DongSi']]
catchedSitesDay
names(catchedSitesDay)
nrow(catchedSitesDay)
source('data_analyst.R')
names(catchedSitesDay)
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
is.null(catchedSitesDay[['DongSi']])
!is.null(catchedSitesDay[['DongSi']])
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
source('data_analyst.R')
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('data_analyst.R')
str(cachedData)
nrow(cachedData)
length(cachedData)
names(cachedData)
head(cachedData[['20161217']])
names(cachedData[['20161217']])
str(cachedData)
cachedData[1,]
cachedData[1]
cachedData[[1]]
for(site in cachedData){print(site)}
head(cachedData[['DongSi']])
names(cachedData)
head(cachedData[['20161201']])
names(cachedData[['20161201']])
names(cachedData[['20161201']]$AQI)
names(cachedData[['20161201']]['AQI'])
head(cachedData[['20161201']]['AQI'])
aqi <- (cachedData[['20161201']]['AQI'])
names(aqi)
nrow(aqi)
typeof(aqi)
length(aqi)
aqi
aqi <- (cachedData[['20161201']]['AQI'])
aqi[1]
names(aqi[1])
names(aqi[[1]])
names(aqi[[2]])
names(aqi[[1]])
aqi <- (cachedData[['20161201']]['AQI'])[[1]]
names(aqi)
aqi[-1,-2,-3]
colnames(aqi)
colnames(aqi[c(-1,-2,-3)])
aqi <- aqi[c(-1,-2,-3)]
names(aqi)
aqi[is.na(aqi)] <- 0
mean(aqi)
mean(aqi, na.rm=TRUE)
sapply(aqi, mean, na.rm = TRUE)
mean(as.matrix(aqi))
source('raw_data.R')
a <- queryKpiMeanValue()
cachedData[['20160101']]['PM2.5']
source('raw_data.R')
a <- queryKpiMeanValue()
a <- queryKpiMeanValue()
source('raw_data.R')
a <- queryKpiMeanValue()
source('raw_data.R')
a <- queryKpiMeanValue()
a
names(a)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
length(kpiMeanData)
mean(1,2)
mean(1,2,3,4)
mean(c(1,2,3,4,5))
mean(c(1,2))
source('raw_data.R')
kpiMeanData
a <- c(1,2)
a
a[3] <- 3
a
a <- c()
a[1] <- 1
a
length(a)
a <- c()
length(a)
source('raw_data.R')
source('raw_data.R')
kpisData
names(kpisData)
names(kpisData[['AQI']])
length(kpisData)
kpisData[['AQI']]
length(kpisData[['AQI']])
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
length(cachedData)
for(date in cachedData){print(date)}
for(date in cachedData){print(names(date))}
cachedData[1]
cachedData[1,]
cachedData[,1]
names(cachedData)
for(date in cachedData){print(length(date))}
for(date in names(cachedData)){print(length(date))}
for(date in names(cachedData)){print((date))}
for(date in names(cachedData)){print((date))}
cachedData[['20161227']]
d <- as.Date('20161227')
d <- as.Date('20161227', '%Y%m%d')
d
cachedData[['20160101']]
cachedData[['20160101']]['AQI']
cachedData[['20160101']]['AQI'][[1]]
source('raw_data.R')
source('raw_data.R')
source('raw_data.R')
source('raw_data.R')
str(kpisData)
source('raw_data.R')
str(kpisData)
kpisData[['2016-10']]
names(kpisData)
kpisData['2016-1']
kpisData[['2016-1']]
length(kpisData[['2016-1']])
source('raw_data.R')
length(kpisData[['2016-1']])
(kpisData[['2016-1']])
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('raw_data.R')
names(kpisMonthlyData)
kpisMonthlyData[['AQI']]
names(kpisMonthlyData[['AQI']])
kpisMonthlyData[['AQI']][['2016-1']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
kpisMonthlyData[['AQI']]
mean(1,2)
mean(c(1,2))
help(mean)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('raw_data.R')
warnings()
kpisMonthlyData[['AQI']]
kpisMonthlyData[['AQI']]
source('raw_data.R')
kpisMonthlyData[['AQI']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
kpisMonthlyData[['AQI']][['2016-1']]
length(kpisMonthlyData[['AQI']][['2016-1']])
a <- list()
a[1] <- 1
a
a[length(a) + 1] <- 1
a
length(a)
a[1]
a[[1]]
toJSON(a)
a <- list()
a[1] <- 1
a
a[2] <- 2
a
a[1,] <- 1
a <- vector()
a[1] <- 1
a
a[2] <- 2
a
a[2]
a <- vector()
length(a)
a[1] <- 1
length(a)
source('raw_data.R')
kpisMonthlyData
kpisMonthlyData[['AQI']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)

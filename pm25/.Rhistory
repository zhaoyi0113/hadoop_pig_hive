<<<<<<< HEAD
x
x[,1] <- c(0,1,1,0,0,0)
x[1,] <- c(0,2,24)
x[2,] <- c(1,1,16)
x[3,] <- c(1,1,36)
x[4,] <- c(0,2,39)
x
x[5,] <- c(0,2,30)
x[6,] <- c(0,3,30)
x
t <- rpart(Suvivied ~ ., x, method='class')
t <- rpart(Survived ~ ., x, method='class')
t
siteData <- querySiteDate('DongSi', '2016', 'Day')
nrow(siteData)
siteData <- querySiteDate('DongSi', '2016', 'DAY')
nrow(siteData)
dse <- within(siteData, {good = ifelse(AQI<50 || PM2.5<50,1,0)})
dse
dse$good
dse <- within(siteData, {good = ifelse(AQI<50 && PM2.5<50,1,0)})
dse$good
dse <- within(siteData, {good = ifelse(AQI<50 <50,1,0)})
dse <- within(siteData, {good = ifelse(AQI<50,1,0)})
dse$good
siteData[is.na(siteData)] <- 0
dse <- within(siteData, {good = ifelse(AQI<50,1,0)})
dse$good
tree <- rpart(good ~ . , dse, method="class")
tree
fancyRpartPlot(tree)
tree <- rpart(good ~ AQI , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~ AQI + PM2.5 , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~  PM2.5 , dse, method="class")
fancyRpartPlot(tree)
tree <- rpart(good ~  PM2.5 + PM10 , dse, method="class")
fancyRpartPlot(tree)
help(predict)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
siteData <- querySiteDate('DongSi', '2016', 'DAY')
warnings()
head(siteDat)
head(siteData)
nrow(siteData)
siteDataLm <- lm(siteData ~ AqI)
siteDataLm <- lm(siteData ~ AQI)
siteDataLm <- lm(siteData ~ siteData$AQI)
siteDataLm <- lm(siteData$AQI ~ siteData$Date)
head(siteDataLm)
nrow(siteData$Date)
length(siteData$Date)
future_dates <- req(366:375)
future_dates <- seq(366:375)
future_dates <- data.frame(date = 366:375)
nrow(future_dates)
pred <- predict(siteDataLm, future_dates)
names(siteData)
length(names(siteData))
siteData[, 14]
siteData[, 15]
siteData[, 15] <- seq(1:365)
names(siteDAta)
names(siteData)
length(names(siteData))
site_data_lm <- lm(siteData$AQI, siteData$V15)
site_data_lm <- lm(siteData$AQI ~ siteData$V15)
future_dates
pred <- predict(site_data_lm, future_dates)
=======
>>>>>>> 830e253b33f7bb50969164bf7c302f741c76b816
future_dates
pred <- predict(site_data_lm, future_dates)
future_dates <- data.frame(days = 366:375)
future_dates
site_data_lm
pred <- predict(site_data_lm, future_dates)
pred
nrow(pred)
names(pred)
pred <- predict(site_data_lm, future_dates)
site_data_lm <- lm(siteData$AQI ~ siteData$V15)
pred <- predict(site_data_lm, future_dates)
days <- 1:365
site_data_lm <- lm(siteData$AQI ~ days)
pred <- predict(site_data_lm, future_dates)
pred
plot(siteData ~ days, xlim=(1,365))
plot(siteData ~ days, xlim=c(1,365))
plot(siteData ~ days, xlim=c(1,365))
plot(siteData ~ days
)
head(siteData)
head(days)
length(days)
plot(siteData$AQI ~ days)
points(366:375, pred, col='red')
future_dates
future_dates <- data.frame(days=366:700)
pred <- predict(site_data_lm, future_dates)
points(366:700, pred, color='green')
points(366:700, pred, col='green')
pred
pred
pred <- predict(site_data_lm, future_dates)
length(pred)
head(pred)
points(366:700, pred, col='yellow')
points(366:700, pred, col="yellow")
points(366:375, pred, col="yellow")
ppoint(siteData ~ days, xlim = c(1:365))
pplot(siteData ~ days, xlim = c(1:365))
plot(siteData ~ days, xlim = c(1:365))
length(days)
plot(siteData ~ days, xlim = c(1,365))
plot(siteData$AQI ~ days, xlim = c(1,365))
points(366:700, pred, col='yellow')
length)pred
length(pred)
library(rpart)
library(rattle)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('data_analyst.R')
queryDataForYear('2016', 'PM2.5', 'MONTH')
queryDataForYear('2016', 'PM2.5', 'DAY')
warnings()
source('data_analyst.R')
warnings()
a <- list()
is.na(a['b'])
a['b']
is.null(a['b'])
a['b'] = c(1,2,3,4)
a[['b']]
a['b',]
a[,'b']
a[,b]
a[b,]
a[[dd]]
a[['33']]
a[['d']]
a[['b']]
a[['b',]]
a[['b']] <- c(1,2,3,4)
a
a[['b']]
a[['c']]
is.null(a[['c']])
is.null(a[['b']])
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
querySiteDate('DongSi', '2016', 'DAY')
str(catchedSitesDay)
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
names(catchedSitesDay)
catchedSitesDay
length(catchedSitesDay)
source('data_analyst.R')
length(catchedSitesDay)
names(catchedSitesDay)
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
source('data_analyst.R')
catchedSitesDay[['DongSi']]
catchedSitesDay
names(catchedSitesDay)
nrow(catchedSitesDay)
source('data_analyst.R')
names(catchedSitesDay)
querySiteDate('DongSi', '2016', 'DAY')
catchedSitesDay[['DongSi']]
is.null(catchedSitesDay[['DongSi']])
!is.null(catchedSitesDay[['DongSi']])
source('data_analyst.R')
querySiteDate('DongSi', '2016', 'DAY')
source('data_analyst.R')
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('data_analyst.R')
str(cachedData)
nrow(cachedData)
length(cachedData)
names(cachedData)
head(cachedData[['20161217']])
names(cachedData[['20161217']])
str(cachedData)
cachedData[1,]
cachedData[1]
cachedData[[1]]
for(site in cachedData){print(site)}
head(cachedData[['DongSi']])
names(cachedData)
head(cachedData[['20161201']])
names(cachedData[['20161201']])
names(cachedData[['20161201']]$AQI)
names(cachedData[['20161201']]['AQI'])
head(cachedData[['20161201']]['AQI'])
aqi <- (cachedData[['20161201']]['AQI'])
names(aqi)
nrow(aqi)
typeof(aqi)
length(aqi)
aqi
aqi <- (cachedData[['20161201']]['AQI'])
aqi[1]
names(aqi[1])
names(aqi[[1]])
names(aqi[[2]])
names(aqi[[1]])
aqi <- (cachedData[['20161201']]['AQI'])[[1]]
names(aqi)
aqi[-1,-2,-3]
colnames(aqi)
colnames(aqi[c(-1,-2,-3)])
aqi <- aqi[c(-1,-2,-3)]
names(aqi)
aqi[is.na(aqi)] <- 0
mean(aqi)
mean(aqi, na.rm=TRUE)
sapply(aqi, mean, na.rm = TRUE)
mean(as.matrix(aqi))
source('raw_data.R')
a <- queryKpiMeanValue()
cachedData[['20160101']]['PM2.5']
source('raw_data.R')
a <- queryKpiMeanValue()
a <- queryKpiMeanValue()
source('raw_data.R')
a <- queryKpiMeanValue()
source('raw_data.R')
a <- queryKpiMeanValue()
a
names(a)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
length(kpiMeanData)
mean(1,2)
mean(1,2,3,4)
mean(c(1,2,3,4,5))
mean(c(1,2))
source('raw_data.R')
kpiMeanData
a <- c(1,2)
a
a[3] <- 3
a
a <- c()
a[1] <- 1
a
length(a)
a <- c()
length(a)
source('raw_data.R')
source('raw_data.R')
kpisData
names(kpisData)
names(kpisData[['AQI']])
length(kpisData)
kpisData[['AQI']]
length(kpisData[['AQI']])
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
length(cachedData)
for(date in cachedData){print(date)}
for(date in cachedData){print(names(date))}
cachedData[1]
cachedData[1,]
cachedData[,1]
names(cachedData)
for(date in cachedData){print(length(date))}
for(date in names(cachedData)){print(length(date))}
for(date in names(cachedData)){print((date))}
for(date in names(cachedData)){print((date))}
cachedData[['20161227']]
d <- as.Date('20161227')
d <- as.Date('20161227', '%Y%m%d')
d
cachedData[['20160101']]
cachedData[['20160101']]['AQI']
cachedData[['20160101']]['AQI'][[1]]
source('raw_data.R')
source('raw_data.R')
source('raw_data.R')
source('raw_data.R')
str(kpisData)
source('raw_data.R')
str(kpisData)
kpisData[['2016-10']]
names(kpisData)
kpisData['2016-1']
kpisData[['2016-1']]
length(kpisData[['2016-1']])
source('raw_data.R')
length(kpisData[['2016-1']])
(kpisData[['2016-1']])
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('raw_data.R')
names(kpisMonthlyData)
kpisMonthlyData[['AQI']]
names(kpisMonthlyData[['AQI']])
kpisMonthlyData[['AQI']][['2016-1']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
kpisMonthlyData[['AQI']]
mean(1,2)
mean(c(1,2))
help(mean)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('raw_data.R')
warnings()
kpisMonthlyData[['AQI']]
kpisMonthlyData[['AQI']]
source('raw_data.R')
kpisMonthlyData[['AQI']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
kpisMonthlyData[['AQI']][['2016-1']]
length(kpisMonthlyData[['AQI']][['2016-1']])
a <- list()
a[1] <- 1
a
a[length(a) + 1] <- 1
a
length(a)
a[1]
a[[1]]
toJSON(a)
a <- list()
a[1] <- 1
a
a[2] <- 2
a
a[1,] <- 1
a <- vector()
a[1] <- 1
a
a[2] <- 2
a
a[2]
a <- vector()
length(a)
a[1] <- 1
length(a)
source('raw_data.R')
kpisMonthlyData
kpisMonthlyData[['AQI']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
d <- data.frame(X=c(1,2,3), y=c('a','b','c'))
d
toJSON(d)
cachedData[1]
head(cachedData[1])
colnames(cachedData[1])
names(cachedData[1])
names(cachedData[1][[1]])
names(cachedData[1][[1]][[1]])
c <- cachedData[1][[1]][[1]]
c
head(c)
nrow(c)
c['DongSi']
l <- list()
l[['DongSi']] <- c['DongSi']
l
l[['DongSi']] <- c['DongSi'] + c['DongSi']
l
names(l)
names(c)
source('raw_data.R')
names(kpisSiteData)
names(kpisSiteData[[AQI]])
names(kpisSiteData[['AQI']])
kpisSiteData[['AQI']][['DongSi']]
source('raw_data.R')
kpisSiteData[['AQI']][['DongSi']]
kpisSiteData[['AQI']]
l
l[['DongSi']]
mean(l[['DongSi']])
sum(l[['DongSi']])
mean(as.matrix(l[['DongSi']]))
l[['DongSi']]
length(l[['DongSi']])
source('raw_data.R')
kpisSiteData[['AQI']][['DongSi']]
kpisSiteData[['AQI']]
length(kpisSiteData[['AQI']]['DongSi'])
l
l[['DongSi']]
a <- list()
length(a[['AQI']])
a[['AQI']] <- 0
a[['AQI']] + mean(as.matrix(l[['DongSi']]))
a[['AQI']] <- a[['AQI']] + mean(as.matrix(l[['DongSi']]))
a
source('raw_data.R')
debugSource('~/dev/bigdata/pm25/raw_data.R', echo=TRUE)
View(sitesKpi)
kpiValue[[kpi]]
kpi
source('~/dev/bigdata/pm25/raw_data.R', echo=TRUE)
kpisSiteData[['AQI']][['DongSi']]
kpisSiteData[['AQI']][['DongSanHuan']]
kpisSiteData[['AQI']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
b <- mean(1,2)
b
mean(c(1,2))
mean(c(0,2))
source('~/dev/bigdata/pm25/raw_data.R', echo=TRUE)
kpisSiteData[['AQI']]
cachedData[[1]]
cachedData[[1]][['AQI']]
cachedData[[1]][['AQI']][[1]]
cachedData[[1]]['AQI']
cachedData[[1]]['AQI'][[1]]
mean(as.matrix(cachedData[[1]]['AQI'][[1]]))
mean(as.matrix(cachedData[[1]]['AQI'][[1]]), is.na=FALSE)
help(mean)
mean(as.matrix(cachedData[[1]]['AQI'][[1]]), na.rm=FALSE)
mean(as.matrix(cachedData[[1]]['AQI'][[1]]), na.rm=TRUE)
as.matrix(cachedData[[1]]['AQI'][[1]])
as.matrix(cachedData[[1]]['AQI'][[1]]['DongSi'])
as.matrix(cachedData[[1]]['AQI'][[1]])
cachedData[[1]]['AQI'][[1]]
help(as.matrix)
sapply(cachedData[[1]]['AQI'][[1]])
sapply(cachedData[[1]]['AQI'][[1]],as.numeric)
as.matrix(sapply(cachedData[[1]]['AQI'][[1]],as.numeric))
as.matrix(sapply(cachedData[[1]]['AQI'],as.numeric))
source('~/dev/bigdata/pm25/raw_data.R', echo=TRUE)
kpisSiteData[['AQI']]
kpisSiteData[['AQI']][['DongSi']]
cachedData[['AQI']][[1]]
cachedData[['AQI']]
cachedData['AQI']
cachedData
cachedData[1]
cachedData[1]['AQI']
cachedData[1][['AQI']]
cachedData[1]
cachedData[1][1]
cachedData[1][1][[1]]
cachedData[1]['AQI'][[1]]
cachedData[1][1][[1]]
ncol(cachedData[1][1][[1]])
ncol(cachedData[1][1])
cachedData[1][1]
head(cachedData[1][1])
cachedData[[1]]
cachedData[[1]]['AQI']
cachedData[[1]]['AQI'][['DongSi']]
cachedData[[1]]['AQI'][[1]]
ncol(cachedData[[1]]['AQI'][[1]])
source('~/dev/bigdata/pm25/raw_data.R', echo=TRUE)
kpisSiteData[['AQI']]
kpisSiteData[['AQI']][['DongSi']]
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
kpisSiteData[['AQI']]
l <- kpisSiteData[['AQI']]
names(l)
ncol(kpisSiteData)
names(kpisSiteData)
for( d in kpisSiteData){print(d)}
for( d in kpisSiteData){print(names(d))}
for( d in kpisSiteData){print(length(d))}
l1 <- list(c(1,2,3))
l1
names(l1)
head(l1)
l2 <- c(4,5,6)
mean(l1,l2)
mean(c(l1,l2))
as.matrix(l1)
mean(as.matrix(l1))
l1 + l2
l1
l2
l1 <- list()
l1[[1]] <- c(1,2,3)
l1
l2 <- list()
l2[[1]] <- c(4,5,6)
l2
l1 + l2
lsit(l1,l2)
list(l1,l2)
simplify2array(l1)
simplify2array(list(l1,l2))
rowMean(simplify2array(list(l1,l2)))
rowMeans(simplify2array(list(l1,l2)))
l1
l2
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
l1
l2
l1 <- list(c(1,2,3))
l1
kpisSiteData[['AQI']][['DongSi']]
kpisSiteData[['AQI']]
l1 <- list(a=1, b=2, c=3)
l1
l2 <- list(a=1, b=2, c=3)
l1 + l2
mean(l1,l2)
source('~/dev/bigdata/pm25/server.R', echo=TRUE)
<<<<<<< HEAD
>>>>>>> 4cbf9a99b2cca27955105c620e2b586ecc99823c
source('~/Projects/hadoop_pig_hive/pm25/server.R')
source('~/Projects/hadoop_pig_hive/pm25/server.R')
source('~/Projects/hadoop_pig_hive/pm25/raw_data.R')
names(cachedData)
=======
source('raw_data.R')
source('raw_data.R')
library(gdata)
source('raw_data.R')
kpisSiteData[['AQI']]
l1 <- list(a=1, b=2, c=3)
l2 <- list(a=4, b=5, c=6)
apply(cbind(do.call(rbind,l1),do.call(rbind,l2)),1, mean)
do.call(rbind, l1)
l1
Map(function(x,y) mean(c(x,y)), l1, l2)
purrr::map2(l1, l2, ~ mean(c(.x, .y)))
library(purrr)
install.packages('purrr')
library(purrr)
purrr::map2(l1, l2, ~ mean(c(.x, .y)))
relist((unlist(l1) + unlist(l2))/2, skeleton= l1)
apply(cbind(do.call(rbind,l1),do.call(rbind,l2)),1, mean)
colMeans(do.call(rbind.data.frame, list(l1,l2)))
source('raw_data.R')
cachedData['20160101']
source('raw_data.R')
cachedData['20160101']
ncols(cachedData['20160101'])
colnames(cachedData['20160101'])
names(cachedData['20160101'])
help(split)
source('raw_data.R')
warnings()
c1 <- data.frame(a=c(1,2,3), b=c(4,5,6))
c1
c2 <- data.frame(a=c(1,2,3), b=c(4,5,NA))
c2
c1+c2
ncol(c1)
for(i in 1:ncol(c1)){ c1[is.na(c1[,i]),i] <- mean(c1[,i], na.rm = TRUE)}
c1
for(i in 1:ncol(c2)){ c1[is.na(c2[,i]),i] <- mean(c2[,i], na.rm = TRUE)}
c2
for(i in 1:ncol(c2)){ c2[is.na(c2[,i]),i] <- mean(c2[,i], na.rm = TRUE)}
c2
c2 <- data.frame(a=c(1,2,3), b=c(NA,NA,NA))
c2
for(i in 1:ncol(c2)){ c2[is.na(c2[,i]),i] <- mean(c2[,i], na.rm = TRUE)}
c2
c1
split(c1)
split(c1, c1$a)
c1
d <- split(c1, c1$a)
length(d)
d[1]
d[2]
ncol(d[1])
d1
c1
c1[1,]
c1[4,] <- c(1,1)
c1
split(c1, c1$a)
d <- split(c1, c1$a)
d[1]
ncols(d[1])
ncol(d[1])
colnames(d[1])
typeof(d[1])
source('raw_data.R')
str(cachedData)
names(cachedData)
names(cachedData['20160101'])
names(cachedData[['20160101']])
cachedData[['20160101']][['AQI']]
names(cachedData[['20160101']][['AQI']])
source('server.R')
source('server.R')
>>>>>>> 830e253b33f7bb50969164bf7c302f741c76b816
